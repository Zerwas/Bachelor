%\section*{Preface}

\section{Introduction}
The objects studied in this thesis are groups of matrices over some finite field.
Given such group, we can equip it with the normalized rank metric and the normalized Haar measure to obtain a \emph{metric measure space}. Observe that, since matrix groups over finite fields are again finite, the normalized Haar measure is just the normalized counting measure.
For some sequences of matrix groups of increasing size there is a well defined limit. For example, this is the case for the special linear group of $(n\times n)$-matrices $\SL_n$.
Carderi and Thom  showed in \cite{thom} that a suitable limit of $\SL_n$ is, as a topological group, \emph{extremely amenable}. The goal of this thesis is to generalize this result to limits of other families of matrix groups, namely groups of \define{symplectic}, \define{unitary}, and \define{orthogonal} matrices.  
These matrices can be seen as \define{Isometries}, i.e. bijective linear maps from a vector space into itself preserving a symplectic, unitary, or orthogonal form.
The general strategy to prove extreme amenability for limits of families of these groups will be as follows: given such a family $(G_n)_{n\in\N}$ of finite matrix groups considered as metric measure spaces. We apply a consequence of Azema's inequality \cite{Azema} to obtain an upper bound for the \emph{measure concentration function} of $G_n$ in terms of the \define{length} of $G_n$.
As the upper bounds converge to zero we conclude that $(G_n)_{n\in\N}$ is a \emph{L\'{e}vy family}, making their limit a \emph{L\'{e}vy group}. Finally, we know from \cite{Levy} that every L\'{e}vy group is extremely amenable.

This thesis is structured as follows. In Section \ref{sec:generalDefns}, we will give a short introduction on how to view matrix groups as metric measure spaces and how to define a limit of a sequence of matrix groups. Furthermore we will introduce the notion of extreme amenability and its connection to L\'evy groups. In Section \ref{sec:azema}, we will briefly introduce the notion of \define{conditional expectation} to show Azema's inequality. Next we will introduce an important invariant of metric measure spaces, namely their \define{length}. Azema's inequality will allow us to connect the length of a metric measure space with its measure concentration function. This connection is used in Section \ref{sec:thom} to show that the limit of $\SL_n$ is extremely amenable. To generalize this result we give a proof of Witt's lemma, which says that isometries between subspaces can be extended to the whole space, in Section \ref{sec:witt}. In Section \ref{sec:mySec}, we generalize the result from Section \ref{sec:thom} to symplectic, unitary, and orthogonal groups. Finally, in Section \ref{sec:ramsey}, a Ramsey theoretic result from \cite{thom} about $\SL_n$ is generalized to symplectic, unitary, and orthogonal groups.

%Define limit of $G_n$

%Examples of matrices in the limit

%structure of thesis:

%extreme amenabiliy
%1. Azema

%2. Thoms proof (matrices as automorphisms but without form)

%3. want to generalize this so we need a form Hence extending the automorphism becomes harder so use Witts lemma

%4. generalized version of the proof

%5. application coloring theorem


%\section{Limits of Matrix Groups and Extreme Amenability}\label{sec:generalDefns}
\section{Preliminaries}\label{sec:generalDefns}
%\subsection*{LAAG}
Let $q$ be a prime power and $\F_q$ be the unique $q$ element field. Denote the general linear group over $\F_q$ by $\GL_n(q)$. We can equip $\GL_n(q)$ with the (normalized) \define{rank-metric} $d(g,h):=\frac{1}{n}\rank(g-h)$, where $\rank(g)$ is the rank of $g$ or equivalently if we view $g$ as a linear map from a vector space into itself then $\rank(g)$ is the dimension of the image of $g$. 
%The group $G$, equipped with the topology induced by $d$, is a topological group.

\begin{lemma}
	The metric $d$ is \define{bi-invariant}, i.e. for all $g,h,k\in \GL_n(q)$ we have 
	\[d(kg,kh)=d(g,h)=d(gk,hk).\] 
\end{lemma}
\begin{proof}
	Let $g,h,k\in \GL_n(q)$. Note that $k$ has full rank. Therefore
	\[n\cdot d(kg,kh)=\rank(kg-kh)=\rank(k(g-h))=\rank(g-h)=n\cdot d(g,h).\]
	The other equality follows similarly.
\end{proof}
%Since all matrices in $G$ have full rank, this metric is \define{bi-invariant}, i.e. for all $g,h,k\in G$ we have \[d(kg,kh)=d(g,h)=d(gk,hk).\] 


Let $G_n\leq \GL_{2^n}(q)$ be a family of subgroups, such that 
$\begin{pmatrix}
	g & 0 \\
	0 & g 
\end{pmatrix}\in G_{n+1}$ for all $g\in G_n$. Denote the normalized rank-metric of $G_n$ by $d_n$.
\begin{lemma}
	For all $n\in \N$ the map
	\[\varphi_n\colon G_n\mapsto G_{n+1}\text{, where }\varphi_n(g)=\begin{pmatrix}
		g &0\\
		0&g
	\end{pmatrix}\]
	is an isometric embedding. 
\end{lemma}
\begin{proof}
	Let $n\in\N$ and $g,h\in G_n$. Then
	\begin{align*}
		d(g,h) & =\frac{1}{n}\rank(g-h)               \\
		       & =\frac{1}{2n}(\rank(g-h)+\rank(g-h)) \\
		       & =\frac{1}{2n}\rank                   
		\begin{pmatrix}
		g-h    & 0                                    \\
		0      & g-h                                  
		\end{pmatrix}\\
		       & =d(                                  
		\begin{pmatrix}
		g      & 0                                    \\
		0      & g                                    
		\end{pmatrix},
		\begin{pmatrix}
		h      & 0                                    \\
		0      & h                                    
		\end{pmatrix}).
	\end{align*}
	Clearly, $\varphi_n$ is also an injective homomorphism.
\end{proof}
		
Define the function $\varphi\colon\bigsqcup_{n\in\N} G_n\to\bigsqcup_{n\in\N} G_n$ with $\varphi|_{G_n}:=\varphi_n$.
%Using $\varphi$ we can define the limit of $(G_n)_{n\in\N}$.
\begin{definition}
	Let $\sim$ be the equivalence relation on $\bigsqcup_{n\in\N} G_n$, defined by $g\sim h$ iff there are $m,n\in\N$ such that $\varphi^n(g)=\varphi^m(h)$.
	Then the \define{limit} of $(G_n)_{n\in\N}$ is defined as
	\[\lim_{n\in\N} G_n:=\left(\bigsqcup_{n\in\N} G_n\right)\big/\sim.\]
\end{definition}
\begin{lemma}
	The sequence of metric groups $(G_n,d_n)_{n\in\N}$ induces a group structure and a bi-invariant metric $d$ on $G=\lim G_n$. 
\end{lemma}
\begin{proof}
	Note that $\psi_n\colon G_n\to G$, $\psi_n(g)=[g]$, is injective and \[G=\bigcup_{n\in\N}\psi_n(G_n).\]
	For $[g], [h]\in G$ we can assume w.l.o.g. that $g,h\in G_n$ for some $n\in\N$. Hence we define $[g]\cdot[h]:=[gh]$ and $d([g],[h]):=d_n(g,h)$. Both functions are well defined since the following diagram commutes for all $n\leq m$.
	\begin{center}
		\begin{tikzpicture}[node distance=1.8cm]
			\node (G) {$G$};
			\node[left of=G] (Gm) {$G_m$};
			\node[below of=Gm] (Gn) {$G_n$};
			\path[right hook-latex'] (Gn) edge node[below right] {$\psi_n$} (G)
			(Gn) edge node[left] {$\varphi^{m-n}|_{G_n}$} (Gm)
			(Gm) edge node[above] {$\psi_n$} (G);
		\end{tikzpicture}
	\end{center}
	%Here $\varphi_{n,m}:=\varphi^{m-n}|_{G_n}$. 
	Note that now the $\psi_n$'s are isometric embeddings. Hence $d$ inherits all desired properties from the $d_n$'s. 
\end{proof}
		
%\subsection*{Topo group}
Furthermore the metric and the group structure of $G$ interact nicely.
\begin{definition}
	A group $G$ equipped with a topology is a \define{topological group} if 
	%\begin{itemize}
	the maps $G\times G\to G$, $(g,h)\mapsto gh$ and
	$G\to G$, $g\mapsto g^{-1}$ are continuous. Here we use the product topology on $G\times G$.
	%\end{itemize}
\end{definition}
		
\begin{lemma}\label{lem:limIsTopo}
	Let $(G_n)_{n\in\N}$, $G=\lim G_n$, and $d$ be as before. Then $G$ with the topology induced by $d$ is a topological group.
\end{lemma}
\begin{proof}
	Denote the neutral element of $G$ by $e$. First we show that the inverse is continuous. Let $\varepsilon>0$ and $g,h\in G$ with $d(g,h)<\varepsilon$. Then, by bi-invariance of $d$,
	\[d(g^{-1},h^{-1})=d(e,gh^{-1})=d(h,g)<\varepsilon.\]
				
	We use $d_\Sigma((g,h),(g',h')):=d(g,g')+d(h,h')$ as metric on $G\times G$. Let $\varepsilon>0$ and $g,g',h,h'\in G$ with $d_\Sigma((g,h),(g',h'))<\varepsilon$. Then
	\[d(gh,g'h')=d(g'^{-1}g,h'h^{-1})\leq d(g'^{-1}g,e)+d(e,h'h^{-1})=d(g,g')+d(h,h')<\varepsilon.\]
	This yields the desired result.
\end{proof}
		
		
The group we are interested in is the metric completion of $\lim G_n$. 
\begin{lemma}\label{lem:climIsTopo}
	Let $G$ be a topological group with bi-invariant metric $d$. Then there a unique metric space $(\bar G,\bar d)$ containing $G$ such that $\bar G$ is complete and $G$ is dense in $\bar G$. Furthermore $\bar G$, with the group structure induced by $G$, is a topological group and $\bar d$ is still bi-invariant.
\end{lemma}
\begin{proof}
	Consider the set $G_C$ of Cauchy sequences in $G$. Define $\bar G:=G_C/\sim$, where two Cauchy sequences $(g_n)_{n\in\N}$ and $(h_n)_{n\in\N}$ are equivalent if $\lim d(g_n,h_n)=0$. Furthermore define $\bar d([(g_n)_{n\in\N}],[(h_n)_{n\in\N}]):=\lim d(g_n,h_n)$. It is well known that $(\bar G,\bar d)$ is the unique metric completion of $(G,d)$.
	%cite https://www.springer.com/de/book/9780387903125 chapter metric spaces
				
	The group operation can be extended to $\bar G$ as follows:
	\[[(g_n)_{n\in\N}]\cdot[(h_n)_{n\in\N}]:=[(g_nh_n)_{n\in\N}].\]
	It is clear from the definition that $\bar d$ is also bi-invariant. Next we show that $\bar G$ is still a topological group. 
	%Observe that for any $\varepsilon>0$ and $[(g_n)_{n\in\N}]\in\bar G$ we can assume w.l.o.g. that $\sup\{d(g_n,g_m)\mid n,m\in\N\}<\varepsilon$. Using this the proof is nearly the same as in Lemma \ref{lem:limIsTopo}. 
	The proof is very similar to the one of Lemma \ref{lem:limIsTopo}.
	Let $\varepsilon>0$ and $[(g_n)_{n\in\N}],[(h_n)_{n\in\N}]\in\bar G$ with $\bar d([(g_n)_{n\in\N}],[(h_n)_{n\in\N}])<\varepsilon$. Observe that $[(g_n)_{n\in\N}]^{-1}=[(g_n^{-1})_{n\in\N}]$. Therefore
	\[\bar d([(g_n)_{n\in\N}]^{-1},[(h_n)_{n\in\N}]^{-1})=\lim_{n\to\infty} d(g_n^{-1},h_n^{-1})=\lim_{n\to\infty} d(g_n,h_n)<\varepsilon. \]
				
	Analogously, we obtain that the group operation is continuous.
	%For the group operation, let $[(g_n)_{n\in\N}], [(g'_n)_{n\in\N}], [(h_n)_{n\in\N}], [(h'_n)_{n\in\N}]\in\bar G$ with
\end{proof}
		
\begin{definition}
	Let $(G_n)_{n\in\N}$, $G=\lim G_n$, and $d$ be as before. Define the \define{closure of the limit of $(G_n)_{n\in\N}$}, denoted by $\clim G_n$, as the metric completion of $(G,d)$.
\end{definition}
By the previous lemma $\clim G_n$ is a topological group and a complete metric space with bi-invariant metric. 
Additionally $\clim G_n$ has another nice property. For this we need to introduce the well established notion of Polish spaces. 
\begin{definition}
	A topological space $(X,\tau)$ is a \define{Polish space} if there is a metric $d$ on $X$ that induces the topology $\tau$ such that $(X,d)$ is complete and has a countable dense subset. A topological group is a \define{Polish group} if the underlying topological space is a Polish space.
\end{definition}
		
\begin{lemma}\label{lem:climIsPolish}
	We have that $\clim G_n$, seen as a topological group, is a Polish group.
\end{lemma}
\begin{proof}
	Obviously, $\lim G_n$ is countable and dense in $\clim G_n$. By definition $\clim G_n$ is also a complete metric space.
\end{proof}
		
\begin{definition}
	A topological group $G$ is \define{extremely amenable} if every continuous action of $G$ on a compact topological space admits a fixed point.
\end{definition}
		
The goal of this thesis is to show that for certain sequences $(G_n)_{n\in\N}$ we have that $\clim G_n$ is extremely amenable. It is hard to show this directly, but we know from \cite{Levy} that every L\'evy group (see Definition \ref{def:Levy}) is extremely amenable. Hence we will show that $\clim G_n$ is a L\'evy group instead.
		
		
%\subsection*{Levy}
		
%\begin{example}
%Let us consider $G:=\clim_{n\to\infty}\GL_{2^n}(q)$. The elements in $G$ are limits of elements of the form
%$\begin{pmatrix}
%g &0&\dots\\
%0&g\\
%\vdots&&\ddots
%\end{pmatrix}$
%\end{example}
		
%TODO clim does not depend on the series
		
%\begin{theorem}\FlorianSagt{Not true :(}
%If $\clim G_n$ is extremely amenable then $\lim G_n$ is also extremely amenable.
%\end{theorem}
%\begin{proof}
%Every continuous action of $\lim G_n$ has a unique extension to an continuous action of $\clim G_n$. ... 
%\end{proof}
		
But before we can talk about L\'evy groups we need some more definitions. For an $\varepsilon>0$, a metric space $(X,d)$, and an $A\subseteq X$, we define the \define{$\varepsilon$-neighborhood} of $A$ to be 
\[N_\varepsilon(A):=\{x\in X\mid\exists y\in A.\  d(x,y)<\varepsilon\}.\]
Note that $N_\varepsilon(A)$ is always an open set.
\begin{definition}
	A \define{metric measure space} (mm-space) $\boldsymbol{X}$ is a triple $(X,d,\mu)$, where $d$ is a metric on the set $X$ and $\mu$ is a measure on the Borel-$\sigma$-algebra induced by $d$. We will always assume that $\mu(X)=1$, i.e. that $\mu$ is a probability measure.  
	The \define{measure concentration function} $\alpha_{\boldsymbol{X}}\colon(0,\infty)\to[0,\frac{1}{2}]$ of $\boldsymbol{X}$ is defined as 
	\begin{align*}
		\alpha_{\boldsymbol{X}}(\varepsilon)=\sup\{1-\mu(N_\varepsilon(A))\mid A\subseteq X\ \text{measurable}, \mu(A)\geq\frac{1}{2}\}. 
	\end{align*}
	A family of mm-spaces $(\boldsymbol{X}_n)_{n\in\N}$ with diameter 1 is called a \define{L\'evy family} if 
	\[\alpha_{\boldsymbol{X}_n}(\varepsilon)\to 0\ \text{ as $n\to\infty$}\]
	for all $\varepsilon>0$.
\end{definition}
		
Now we can come back to groups.
\begin{definition}\label{def:Levy}
	A \define{L\'evy group} is a group $G$ equipped with a metric $d$, where
	\begin{itemize}
		\item the group $G$ with the topology induced by $d$ is a Polish group and
		\item there is an increasing sequence $(G_n)_{n\in\N}$ of compact subgroups, such that $\bigcup_{n\in\N} G_n$ is dense in $G$ and $(G_n,d|_{G_n},\mu_n)_{n\in\N}$ is a L\'evy family. Here $\mu_n$ is the normalized Haar measure of $G_n$.
	\end{itemize}  
\end{definition}
%Note that, since $G_n$ is finite, the normalized Haar measure of $G_n$ is just the normalized counting measure.
		
Whether $G=\clim G_n$ is a L\'evy group depends on the particular choice of the sequence $(G_n)_{n\in\N}$. We have already seen in Lemma \ref{lem:climIsPolish} that $G$ is always a Polish group. But the second condition is not so easy to prove.
To show that for certain sequences, $G$ is a L\'evy group, we will use $(G_n)_{n\in\N}$ as increasing sequence (or $(\psi_n(G_n))_{n\in\N}$ to be precise) and show that it is a L\'evy family. Note that $G_n$ is finite and therefore compact. Furthermore the normalized Haar measure $\mu_n$ on $G_n$ is just the normalized counting measure. The plan is to bound $\alpha_{(G_n,d_n,\mu_n)}(\varepsilon)$ in terms of $n$ and $\varepsilon$ and show that this bound converges to 0 as $n$ tends to infinity. 
The next section develops the methods necessary to obtain this upper bound.
%To do this we need methods which are developed in the next section.
		
%\[\varphi_n\colon g\mapsto\]
%is a well defined embedding
		
\section{Azema's Inequality and Measure Concentration}\label{sec:azema}
In this section we will prove Azema's inequality and as a consequence, we will obtain an upper bound for the measure concentration function in terms of an invariant of mm-spaces called the length. For groups we will then bound the length using an increasing sequence of subgroups. 

As the next results rely heavily on stochastic methods we will briefly introduce the necessary notions. Since the $G_n$ are all finite and equipped with the normalized counting measure we will only consider \define{probability spaces} $(X,\Sigma,\mu)$, where $X$ is finite, $\Sigma$ is a $\sigma$-algebra over $X$, and $\mu(A)=|A|/|X|$ for $A\subseteq X$. In this section we will roughly follow Section 3.2 from \cite{Azema}. Most of the statements presented in this section hold in a more general setting. 

Note that in our case $\Sigma$ has a very nice representation.%Note that $\Sigma$ is the smallest $\sigma$-algebra containing $A_1,\dots,A_n$, where $$ 
		
\begin{lemma}
	Let $\Sigma$ be a $\sigma$-algebra over a finite set $X$ and $A_1,\dots,A_n$ be the minimal nonempty sets in $\Sigma$. Then $A_1,\dots,A_n$ is a partition of $X$ and $\Sigma$ is the smallest $\sigma$-algebra containing $A_1,\dots,A_n$.
\end{lemma}
\begin{proof}
	First we show that $A_1,\dots,A_n$ is a  partition of $X$. Since $A_i\cap A_j\in\Sigma$ we conclude, by minimality of $A_i$ and $A_j$, that either $i=j$ or $A_i\cap A_j=\emptyset$. Clearly, every element of $X$ is contained in one of the $A_i$. 
				
	For $A\in\Sigma$ we have, again by minimality, that $A\cap A_i$ is either $A_i$ or $\emptyset$. Therefore $A$ can be written as a union of $A_i$'s.
\end{proof}
Note that it follows from the proof that any $A\in\Sigma$ can be written as $\bigcup_{i\in I}A_i$ for a suitable set $I\subseteq\{1,\dots,n\}$. This lemma allows us to use partitions and $\sigma$-algebras interchangeably. We will denote the partition corresponding to $\Sigma$ by $A_1,\dots,A_n$ and for $\Sigma'$ we will use $B_1,\dots,B_{m}$.
\begin{lemma}\label{lem:measurabilityForm}
	Let $f\colon X\to\R$ be a $\Sigma$-measurable (measurable for short) function. Then there are $f_1,\dots,f_n\in\R$ such that $f=\sum_{i=1}^{n}f_i\cdot\mathbb{1}_{A_i}$.
\end{lemma}
\begin{proof}
	For all $c\in\R$ the set $\{x\in X\mid f(x)=c\}$ is in $\Sigma$ and therefore a union of $A_i$'s. This already yields the lemma.
	%It suffices to show that for any $A_i$ we have that $f|_{A_i}$ is constant. Assume it is not and let $a,b\in f(A_i)$ with $a\not=b$. Let $\varepsilon>0$ such that $b\notin N_\varepsilon(a)$. Then 
\end{proof}
		
The next definition is simplified a lot by only considering finite $X$.
		
\begin{definition}
	Let $(X,\Sigma,\mu)$ be a finite probability space, $f\colon X\to \R$ be a measurable function, and $\Sigma'$ be a sub-$\sigma$-algebra of $\Sigma$. Then the \define{conditional expectation} of $f$ with respect to $\Sigma'$ is defined as
	\[\E(f\mid \Sigma'):=\sum_{i=1}^{m}\E(f\mid B_i)\cdot \mathbb{1}_{B_i}.\]
\end{definition}
		
		
One often thinks of $\Sigma'$ as the available information, a finer partition means more information. The conditional expectation $\E(f\mid \Sigma')$ is the best approximation of $f$ given only the information from $\Sigma'$. 
With this intuition the statements from the following lemma are not surprising. 
\begin{lemma}\label{lem:condExp}
	Let $(X,\Sigma,\mu)$ be a finite probability space, $f,g\colon X\to \R$ be measurable functions, $\Sigma''\subseteq\Sigma'\subseteq\Sigma$ be sub-$\sigma$-algebras. Then
	\begin{enumerate}[label=\roman*)]
		\item if $f\leq g$, then $\E(f\mid \Sigma')\leq\E(g\mid \Sigma')$,
		\item for any $\Sigma'$-measurable function $h\colon X\to\R$ we have $\E(h f\mid\Sigma')=h\cdot\E(f\mid\Sigma')$,
		\item also $\E(\E(f\mid \Sigma')\mid\Sigma'')=\E(f\mid\Sigma'')=\E(\E(f\mid \Sigma'')\mid\Sigma')$.
	\end{enumerate}
\end{lemma}
\begin{proof}
	To i): If $f\leq g$, then
	\[\E(f\mid \Sigma')=\sum_{i=1}^m\E(f\mid B_i)\cdot \mathbb{1}_{B_i}\leq \sum_{i=1}^m\E(g\mid B_i)\cdot \mathbb{1}_{B_i}=\E(g\mid \Sigma').\]
				
				
	To ii): Let $h\colon X\to\R$ be $\Sigma'$-measurable function, then, by Lemma \ref{lem:measurabilityForm}, $h$ is of the form $\sum_{i=1}^{m}h_i\cdot \mathbb{1}_{B_i}$. Now 
	\begin{align*}
		\E(h f\mid\Sigma') & =\sum_{i=1}^{m}\E(hf\mid B_i)\cdot\mathbb{1}_{B_i}        \\
		                   & =\sum_{i=1}^{m}h_i\cdot\E(f\mid B_i)\cdot\mathbb{1}_{B_i} \\
		                   & =h\cdot\E(f\mid\Sigma').                                  
	\end{align*}
				
	To iii): Let $C_1,\dots,C_k$ be the partition corresponding to $\Sigma''$. Furthermore note that $\E(\E(f\mid \Sigma')\mid B)=\E(f\mid B)$ for all $B\in\Sigma'$. Hence
	\begin{align*}
		\E(\E(f\mid \Sigma')\mid\Sigma'') & =\sum_{i=1}^{k}\E(\E(f\mid \Sigma')\mid C_i)\cdot\mathbb{1}_{C_i}                                           \\
		                                  & =\sum_{i=1}^{k}\E(f\mid C_i)\cdot\mathbb{1}_{C_i}\tag{$C_i\in\Sigma'$}                                      \\
		                                  & =\E(f\mid\Sigma'')                                                                                          \\
		                                  & =\sum_{j=1}^{k}\E(f\mid C_j)\cdot\mathbb{1}_{C_j}\cdot\sum_{i=1}^{m}\mathbb{1}_{B_i}                        \\
		                                  & =\sum_{i=1}^{m}\sum_{j=1}^{k}\E(\E(f\mid C_j)\mid B_i)\cdot\mathbb{1}_{C_j}\cdot\mathbb{1}_{B_i}            \\
		                                  & =\sum_{i=1}^{m}\sum_{j=1}^{k}\E(\E(f\mid C_j)\cdot\mathbb{1}_{C_j}\mid B_i)\cdot\mathbb{1}_{B_i}\tag{by ii} \\
		                                  & =\E(\E(f\mid \Sigma'')\mid\Sigma').                                                                         
	\end{align*}
	This concludes the proof.
\end{proof}
		
		
%\begin{definition}
%A \define{martingale} is a family $(f_i,\mathcal{F}_i)_{i\in \{0,\dots,n\}}$ such that
%\begin{itemize}
%\item $f_i$ is integrable for all $i\in \{0,\dots,n\}$,
%\item $f_i$ is $\mathcal{F}_i$ measurable for all $i\in \{0,\dots,n\}$, and
%\item $f_i=\mathbb{E}[f_{i+1}|\mathcal{F}_i]$ for all $i\in \{0,\dots,n-1\}$.
%\end{itemize}
%\end{definition}
		
The following lemma might not seem very interesting, but changing the exponent from $x$ to $x^2$ is the crucial ingredient for the proof of Azema's inequality.
\begin{lemma}\label{lem:exToex2} For all $x\in\R$
	\[e^{x}\leq x+e^{x^2}.\]
\end{lemma} 
\begin{proof}
	Note that for $x=0$ both sides are equal to 1. As both sides are differentiable it suffices to show that the derivative of the right hand side is larger than the derivative of the left hand side for all $x\geq0$ and smaller for all $x\leq0$. Hence, we want to show
	\begin{align*}
		e^x\geq 1+2xe^{x^2}\text{ for all $x\leq 0$} &   & \text{and} &   & e^x\leq 1+2xe^{x^2}\text{ for all $x\geq 0$}. 
	\end{align*}
	As for $x=0$ both sides are again equal to 1 we can reduce the problem, by similar reasoning, to the question whether
	\[e^x\leq 2e^{x^2}+4x^2e^{x^2}\text{ for all $x\in\R$}.\]
	Showing this inequality comes down to a case study.
	\begin{itemize}
		\item For $x\leq0$ the left side is bounded by 1, while the right side is larger than 2.
		\item For $0<x\leq\ln 2$ note that both sides are increasing. Furthermore the right side is at least 2, while the left side is at most 2.
		\item For $\ln2<x<1$ both sides are still increasing. Also, $\ln2\geq\frac{1}{2}$ and therefore the right side with $x=\ln2$ evaluates to a number larger then $e$. Whereas the left side is clearly less than $e$.
		\item For $1\leq x$ we have $x\leq x^2$ and the inequality holds trivially.
		      %\item For $0< x< 1$ note that the both sides are increasing. Hence the inequality holds for all $x$ with $e^x\leq 2$. Finally, $\ln2\geq\frac{1}{2}$ and therefore the right hand side with $x=\ln2$ evaluates to a number larger then $e$.  
	\end{itemize}
	Hence the inequality holds for the second derivatives  and therefore also for the original functions.
\end{proof}
		
Before we will prove Azema's inequality, let us introduce some useful notation. Whenever there is no danger of confusion we will abbreviate sets of the form
\begin{align*}
	\{x\in X\mid \operatorname{Condition}(x)\text{ holds}\} &   & \text{by} &   & \{\operatorname{Condition}\}. 
\end{align*}
For example $\{x\in X\mid f(x)= c\}$ becomes $\{f= c\}$.
For a function $f\colon X\to\R$ we denote the \define{sup norm} of $f$ by $\|f\|_\infty:=\sup f(X)$.
		
\begin{lemma}[Azema's inequality]\label{lem:azema}
	Let $(X,\Sigma,\mu)$ be a finite probability space, $f\colon X\to\R$ a measurable function, and $\{X,\emptyset\}=\Sigma_0\subseteq\dots\subseteq\Sigma_n=\Sigma$ a chain of sub-$\sigma$-algebras. Define $f_0:=\E(f\mid\Sigma_0)$ and $f_i:=\E(f\mid\Sigma_i)$, $d_i:=f_i-f_{i-1}$ for $i\in\{1,\dots,n\}$. Then for every $\varepsilon\geq0$
	%\[\mu(\{x\in X\mid |f(x)-\mathbb{E}(f)|\geq c\})\leq 2\exp\left(-\frac{c^2}{4\sum_{i=1}^{n}\|d_i\|^2_\infty}\right)\]
	\[\mu(\{|f-\E(f)|\geq \varepsilon\})\leq 2\cdot\exp\left(-\frac{\varepsilon^2}{4\cdot\sum_{i=1}^{n}\|d_i\|^2_\infty}\right).\]
\end{lemma}
Note that $(f_i,\Sigma_i)_{0\leq i\leq n}$ is a discrete martingale. But we will not formally introduce this notion as it is not necessary for the upcoming results.
		
\begin{proof} First, observe that $f_0=\E(f\mid \{X,\emptyset\})=\E(f)$ and $f_n=\E(f\mid\Sigma)=f$. Using a simple telescoping sum we obtain \[f-\E(f)=d_1+\dots+d_n.\] Therefore we have
	\begin{align*}
		\mu(\{f-\E(f)\geq \varepsilon\}) & =\mu(\{\sum_{i=1}^{n}d_i\geq  \varepsilon\})                                                                                                                            \\
		                                 & =\mu(\{\lambda\cdot\sum_{i=1}^{n}d_i\geq \lambda \varepsilon\})\tag{for any $\lambda>0$}                                                                                \\
		                                 & =\mu(\{\exp({\lambda\cdot\sum_{i=1}^{n}d_i})\geq e^{\lambda \varepsilon}\})                                                                                               \\
		                                 & \leq\E(\exp({\lambda\cdot\sum_{i=1}^{n}d_i}))\cdot e^{-\lambda \varepsilon}\tag{$\ast$}                                                                                 \\
		                                 & =\E(\E(e^{\lambda d_1}\cdot\ldots\cdot e^{\lambda d_{n-1}}\cdot e^{\lambda d_n}\mid \Sigma_{n-1}))\cdot e^{-\lambda \varepsilon}\tag{Lemma \ref{lem:condExp} iii)}            \\
		                                 & =\E(e^{\lambda d_1}\cdot\ldots\cdot e^{\lambda d_{n-1}}\cdot\E(e^{\lambda d_n}\mid \Sigma_{n-1}))\cdot e^{-\lambda \varepsilon}\tag{Lemma \ref{lem:condExp} ii)}            \\
		                                 & \leq\E(e^{\lambda d_1}\cdot\ldots\cdot e^{\lambda d_{n-1}})\cdot e^{\lambda^2\cdot \|d_n\|^2_\infty}\cdot e^{-\lambda \varepsilon}\tag{$\ast\ast$}                      \\
		                                 & \hspace{3cm}\vdots                                                                                                                                                      \\
		                                 & \leq e^{\lambda^2\cdot \|d_1\|^2_\infty}\cdot\ldots\cdot e^{\lambda^2\cdot \|d_{n-1}\|^2_\infty}\cdot e^{\lambda^2\cdot \|d_n\|^2_\infty}\cdot e^{-\lambda \varepsilon} \\
		                                 & =\exp({\lambda^2\cdot\sum_{i=1}^n\|d_i\|^2_\infty-\lambda \varepsilon}).                                                                                                
	\end{align*}
				
	For $(\ast)$ note that for any measurable function $g\colon X\to\R$ and $c\in\R$ we have %$\mu(\{g\geq1\})\leq\E(g)$.
	\[\mu(\{e^g\geq e^c\})=\E(\mathbb{1}_{\{e^g\geq e^c\}})\leq\E(e^g)e^{-c}.\]
				
	For $(\ast\ast)$ we need to use Lemma \ref{lem:exToex2}
	\begin{align*}
		\E(e^{\lambda d_i}\mid \Sigma_{i-1}) & \leq \E(\lambda d_i\mid\Sigma_{i-1})+\E(e^{\lambda^2 d^2_i}\mid\Sigma_{i-1})            \\
		                                     & =\lambda\cdot\E( f_i-f_{i-1}\mid\Sigma_{i-1}) + \E(e^{\lambda^2 d^2_i}\mid\Sigma_{i-1}) \\
		                                     & \leq 0 + e^{\lambda^2 \|d_i\|_\infty^2}.\tag{Lemma \ref{lem:condExp}}                   
	\end{align*}
				
	Substituting $\frac{\varepsilon}{2\cdot\sum_{i=1}^{n}\|d_i\|_\infty^2}$ for $\lambda$, we conclude that
	\[\mu(\{f-\mathbb{E}(f)\geq \varepsilon\})\leq\exp\left(-\frac{\varepsilon^2}{4\cdot\sum_{i=1}^{n}\|d_i\|^2_\infty}\right). \]
	The same calculations with $-d_i$ instead of $d_i$ yield the dual inequality
	\[\mu(\{f-\mathbb{E}(f)\leq -\varepsilon\})\leq\exp\left(-\frac{\varepsilon^2}{4\cdot\sum_{i=1}^{n}\|d_i\|^2_\infty}\right). \]
	These two statements obviously give us the desired result.
\end{proof}
		
Since $\mu$ is the counting measure Azema's inequality bounds the number of elements for which $f$ differs at least $\varepsilon$ from its mean. This seems at least somewhat connected to the measure concentration function, as there we want to show that for any set $A$ with $\mu(A)\geq\frac{1}{2}$ only a few elements are more than $\varepsilon$ away from $A$.
The next goal is to formalize this connection. % Azema's inequality with the measure concentration function. 
But to achieve this we first need to introduce a new property of mm-spaces.
\begin{definition}\label{def:length}
	Let $\boldsymbol{X}=(X,d,\mu)$ be a finite mm-space. The \define{length} of $\boldsymbol X$ is the minimum over all $l$ with the following property. There is a refining sequence of partitions 
	\[\{X\}=\Omega_0\prec\dots\prec\Omega_n=\{\{x\}\mid x\in X\},\]
	where for every $i\in\{1,\dots,n\}$ there is an $a_i$ such that $\sum_{i=1}^{n}a^2_i=l^2$ and for every $A\in \Omega_{i-1}$, $x,y\in A$ there is an isomorphism (of metric spaces) $\phi\colon[x]_i\to [y]_i$ with 
	\[d(z,\phi(z))\leq a_i\text{ for all $z\in[x]_i$.}\]
\end{definition}
		
Note that since $\mu$ is the counting measure $\phi$ is also an isomorphism of mm-spaces.
As this definition is quite hard we will look at some properties and examples of the length of $\boldsymbol{X}$ before proceeding.
\begin{lemma}
	Let $\boldsymbol{X}$ be a finite mm-space. Then the length of $\boldsymbol{X}$ is at most the diameter of $\boldsymbol{X}$.
\end{lemma}
\begin{proof}
	Consider only the two partitions $\{X\}\prec\{\{x\}\mid x\in X\}$. Clearly,  $x\to y$ is an isomorpism between $\{x\}$ and $\{y\}$ for all $x,y\in X$.
\end{proof}
		
We will see more properties later in Lemma \ref{lem:diamLen} and Lemma \ref{lem:lengthLowerBound}.
		
\begin{example}
	Let us look at the $n$-dimensional cube $X_n=\{0,1\}^n$.
				
	\begin{center}
		\tikzstyle{dot}=[circle,draw,minimum size=0.8mm,inner sep=0pt,fill]
		\begin{tikzpicture}
			\node[dot] at (0,0) (11) {};
			\node[dot, right of = 11] (12) {};
			\node at (0.5,-0.5) {$X_1$};
								
			\node[dot] at (3,0) (21) {};
			\node[dot, right of = 21] (22) {};
			\node[dot, above of = 22] (23) {};
			\node[dot, above of = 21] (24) {};
			\node at (3.5,-0.5) {$X_2$};
								
			\node[dot] at (6,0) (31) {};
			\node[dot, right of = 31] (32) {};
			\node[dot, above of = 32] (33) {};
			\node[dot, above of = 31] (34) {};
			\node[dot] at (6.5,0.5) (41) {};
			\node[dot, right of = 41] (42) {};
			\node[dot, above of = 42] (43) {};
			\node[dot, above of = 41] (44) {};
			\node at (6.5,-0.5) {$X_3$};
								
			\path (11) edge (12)
			(21) edge (22)
			(22) edge (23)
			(23) edge (24)
			(24) edge (21)
			(31) edge (32)
			(32) edge (33)
			(33) edge (34)
			(34) edge (31)
			(41) edge (42)
			(42) edge (43)
			(43) edge (44)
			(44) edge (41)
			(31) edge (41)
			(32) edge (42)
			(33) edge (43)
			(34) edge (44);
								
		\end{tikzpicture}
	\end{center}
	We will only consider the following sequence of partitions
	\[\Omega_0\prec\dots\prec\Omega_n\text{ with }\Omega_i=\{wX_{n-i}\mid w\in\{0,1\}^i\}.\]
				
	First, we equip $X_n$ with the euclidean metric and rescale it such that the diameter is 1. To bound the length of the resulting space $\boldsymbol X^E_n$ consider $[x]_i\neq[y]_i$. Note that $x$ and $y$ are w.l.o.g. of the form $w0u$ and $w1v$ for some $w\in\{0,1\}^{i-1}$, $u,v\in\{0,1\}^{n-i}$. The isomorphism $\phi$ takes an element $w0u'$ in $[x]_i$ and maps it to $w1u'$. The length of a side in $\boldsymbol X^E_n$ is $\frac{1}{\sqrt{n}}$, hence $a_i$ is $\frac{1}{\sqrt{n}}$ for every $i$ and the length of $\boldsymbol{X}^E_n$ is bounded by $(\sum_{i=1}^{n}\frac{1}{\sqrt{n}^2})^{\frac{1}{2}}=1$.
				
	Secondly, we use the normalized hemming metric and obtain the mm-space $\boldsymbol{X}^H_n$ with diameter 1. It has side length $\frac{1}{n}$ and therefore the length of $\boldsymbol{X}^H_n$ is bounded by $(\sum_{i=1}^{n}\frac{1}{n^2})^{\frac{1}{2}}=n^{-\frac{1}{2}}$. We see that here the length of $\boldsymbol{X}^H_n$ converges to 0 as $n$ tends to infinity. We will show that this means that the measure concentration function $\alpha_{\boldsymbol{X}^H_n}(\varepsilon)$ also goes to 0 for any fixed $\varepsilon>0$. 
\end{example}
		
Now we come back to the connection between Azema's inequality and the measure concentration function.
		
\begin{lemma}\label{lem:lipschitz}
	Let $\boldsymbol{X}=(X,d,\mu)$ be a finite mm-space of length $l$ and $f\colon X\to\R$ be a 1-Lipschitz function. Then
	\[\mu(\{|f-\E(f)|\geq\varepsilon\})\leq 2\exp\left(-\frac{\varepsilon^2}{4l^2}\right)\text{ for every $\varepsilon>0$.}\] 
\end{lemma}
\begin{proof}
	Let 
	$\Omega_0\prec\dots\prec\Omega_n$
	be a refining sequence of partitions with $a_1,\dots,a_n$ as in Definition \ref{def:length} such that $\sum_{i=1}^{n}a_i^2=l^2$. These partitions correspond to $\sigma$-algebras $\Sigma_0\subseteq\dots\subseteq\Sigma_n$. Now we can apply Azema's inequality to obtain
	\[\mu(\{|f-\E(f)|\geq \varepsilon\})\leq 2\cdot\exp\left(-\frac{\varepsilon^2}{4\cdot\sum_{i=1}^{n}\|d_i\|^2_\infty}\right),\]
	where $f_i=\E(f\mid \Sigma_i)$ and $d_i=f_i-f_{i-1}$ as before. Therefore we only need to show that $\|d_i\|_\infty\leq a_i$. Since on any $A\in\Omega_{i-1}$ we have $f_{i-1}=\E(f_i\mid A)$ it suffices to show that for all $A\in\Omega_{i-1}$ it holds that $f_i(x)-f_i(y)\leq a_i$ for all $x,y\in A$.
	Let $\phi\colon [x]_i\to [y]_i$ be the isomorphism from Definition \ref{def:length}.
	\begin{align*}
		f_i(x)-f_i(y) & =\E(f\mid [x]_i)-\E(f\mid [y]_i)                                \\
		              & =\E(f\mid [x]_i)-\E(f\circ\phi\mid [x]_i)                       \\
		              & =\E(f-f\circ\phi\mid [x]_i)                                     \\
		              & \leq \E(d(\ .\ ,\phi(\ .\ ))\mid [x]_i)\tag{$f$ is 1-Lipschitz} \\
		              & \leq a_i                                                        
	\end{align*}
	This concludes the proof.
\end{proof}
		
Let $\boldsymbol{X}=(X,d,\mu)$ be a finite mm-space and $A\subseteq X$ measurable. Observe that $d_A\colon X\to\R$, $d_A(x):=\inf_{y\in A}d(x,y)$ is a 1-Lipschitz function. Using $d_A$ we can rewrite the definition of the measure concentration function 
\[\alpha_{\boldsymbol{X}}(\varepsilon)=\sup\{\mu(\{d_A\geq\varepsilon\})\mid \mu(A)\geq\frac{1}{2}\}.\]
This gives us the desired connection.
%\FlorianSagt{$n$ dimensional cubes with diameter 1 have length $\frac{1}{\sqrt{3}}$ and if $|X|$ is a prime, then the length of $X$ is equal to its diameter, the length of a circle is the same as its diameter}
		
%Between any two points in $X$ there is almost surely a path $x_0,\dots,x_n$ such that \[\sum_{i=1}^n d(x_{i-1},x_i)^2\leq \operatorname{len}(X)^2\] (this path probably has some special properties).
		
\begin{theorem}\label{thm:measureConcetration}
	If a finite mm-space $\boldsymbol{X}=(X,d,\mu)$ has length $l$, then the measure concentration function of $\boldsymbol X$ satisfies
	\[\alpha_{\boldsymbol{X}}(\varepsilon)\leq 2\exp\left(-\frac{\varepsilon^2}{16l^2}\right)\text{ for all $\varepsilon>0$}.\]
\end{theorem}
\begin{proof}
	Let $\varepsilon>0$ and $A\subseteq X$ be measurable with $\mu(A)\geq\frac{1}{2}$. As mentioned above $d_A$ is 1-Lipschitz and therefore, by Lemma \ref{lem:lipschitz},
				
	\[\mu(\{|d_A-\E(d_A)|\geq\varepsilon\})\leq 2\exp\left(-\frac{\varepsilon^2}{4l^2}\right).\]
	Now there are two cases to consider, the first case is the more interesting one.
				
	If $\E(d_A)\leq\varepsilon$, then for any $x$ with $d_A(x)\geq2\varepsilon$ we know $d_A(x)\geq \varepsilon+\E(d_A)$ and therefore $|d_A(x)-\E(d_A)|\geq \varepsilon$. As a consequence %then for any $x$ with $|d_A(x)-\E(d_A)|<\varepsilon$ we have, by non-negativity of $d_A$, that $d_A(x)-\E(d_A)<\varepsilon$. Hence $d_A(x)<2\varepsilon$ and in general 
	\[\mu(\{d_A\geq2\varepsilon\})\leq \mu(\{|d_A-\E(d_A)|\geq\varepsilon\})\leq2\exp\left(-\frac{\varepsilon^2}{4l^2}\right) .\]
	Replacing $\varepsilon$ by $\frac{\varepsilon}{2}$ gives the desired inequality.
				
	If $\E(d_A)>\varepsilon$, then $A\subseteq \{|d_A-\E(d_A)|\geq\varepsilon\}$. Consequently,
	\[\mu(\{d_A\geq\varepsilon\})\leq \mu(X\setminus A)\leq \frac{1}{2}\leq \mu(A)\leq \mu(\{|d_A-\E(d_A)|\geq\varepsilon\})\leq 2\exp\left(-\frac{\varepsilon^2}{4l^2}\right).\]
	This proves the theorem.
\end{proof}
Note that in the second case the upper bound is at least $\frac{1}{2}$, which means that if $l$ is large enough then we are in the first case and the expected distance to a set with at least half measure is less then $\varepsilon$. In Section \ref{sec:ramsey} we will see a slight modification of this lemma.
But for now our goal is to apply Theorem \ref{thm:LevyImpliesExAm} to groups and as it turns out we can bound the length of a group using sequences of subgroups. Before we can write down the corresponding corollary we need to make a quick excursion into factor metrics. 
		
\begin{definition}
	Let $(X,d)$ be a metric space and let $\sim$ be an equivalence relation on $X$. Then \[d_\sim([x],[y])=\inf\{d(p_1,q_1)+\dots+d(p_n,q_n)\mid q_i\sim p_{i+1}, x\sim p_1, q_n\sim y\}\] defines a pseudometric on $X/{\sim}$.
\end{definition}
		
In case that $X$ is a group with bi-invariant metric this definition simplifies.
\begin{lemma}\label{lem:factorMetric}
	Let $G$ be a finite group with bi-invariant metric $d$ and $H$ a (not necessarily normal) subgroup of $G$. Then the factor metric $d_H$ on $G/H=\{gH\mid g\in G\}$ is a proper metric and satisfies $d_H(gH,g'H)=\inf\{d(g,g'h)\mid h\in H\}$.
\end{lemma}
\begin{proof}
	Let $x,y\in G$. We show that for any path $p_1,q_1,\dots,p_n,q_n$ as in the definition there are $x\sim p$ and $q\sim y$ such that $d(p,q)\leq d(p_1,q_1)+\dots+d(p_n,q_n)$. It suffices to show this for $n=2$. 
	By definition $p_1,q_1,p_2,q_2$ are of the form $g,g',g'h,g''$ for some $g,g',g''\in G$ and $h\in H$. Since $d$ is bi-invariant 
	\[d(gh,g'')\leq d(gh,g'h)+d(g'h,g'')=d(g,g')+d(g'h,g'').\]
	Furthermore we are given that $G$ is finite. Hence the infimum becomes a minimum and $d_H([x],[y])=0$ only if $[x]=[y]$.
	%$d(g,g')=d(gh,g'h)$.
\end{proof}
		
Equipped with this knowledge we can formulate the final statement for this section. 
\begin{corollary}\label{cor:meaContractionGroups}
	Let $G$ be a finite group with a bi-invariant metric $d$, and let
	\[\{e\}=G_0<G_1<\dots <G_n=G\]
	be a chain of subgroups. Denote the diameter of $G_i/G_{i-1}$ with respect to the factor metric by $a_i$. Then the length of $G$ is at most $\left(\sum_{i=1}^{n}a_i^2\right)^{\frac{1}{2}}$ and the measure concentration function of the mm-space $(G,d,\mu)$, where $\mu$ is the normalized counting measure, satisfies
	\[\alpha_{(G,d,\mu)}(\varepsilon)\leq 2\exp\left(-\frac{\varepsilon^2}{16\cdot\sum_{i=1}^{n}a_i^2}\right).\]
\end{corollary}
\begin{proof}
	We show that the length $l$ of $(G,d,\mu)$ is bounded by $\left(\sum_{i=1}^{n}a_i^2\right)^{\frac{1}{2}}$ and apply Theorem \ref{thm:measureConcetration}. Define the sequence of partitions $\Omega_i:=\{g G_i\mid g\in G\}$
	\begin{align*}
		\{\{g\}\mid g\in G\}=\Omega_0\succ\Omega_1\succ                   & \dots\succ\Omega_n=\{G\}                                   \\
		\{e\}=\parbox{\widthof{$\Omega_0\succ\Omega_1\succ$}}{$G_0<G_1<$} & \parbox{\widthof{${}\dots\succ\Omega_n$}}{$\dots <G_n$}=G. 
	\end{align*}
	Take $A\in \Omega_{i+1}$ and $g,g'\in A$. Since the distance of $gG_i$ and $g'G_i$ with respect to the factor metric is at most $a_i$ there is an $h'\in G_i$ such that $d(g,g'h')\leq a_i$. Hence the map 
	\begin{align*}
		\phi\colon g G_i & {}\to g'G_i     \\
		gh               & {}\mapsto g'h'h 
	\end{align*}
	is, by bi-invariance of $d$, an isomorphism of metric spaces with $d(gh,g'h'h)=d(g,g'h')\leq a_i$ for all $gh\in gG_i$.
	Therefore $\left(\sum_{i=1}^{n}a_i^2\right)$ is an upper bound for $l^2$. 
\end{proof}
Carderi and Thom used this result to show that the closure of the limit of $\SL_{2^n}(q)$ is extremely amenable \cite{thom}. We will recreate this proof in the next section. 
		
		
\section{Special Linear Groups and Extreme Amenability}\label{sec:thom}
		
When studying matrices it is often useful to look at the corresponding linear maps of a suitable vector space. 
In the case of $\SL_n(q)$ an $n$ dimensional $\F_q$ vector space $V$ suffices. Fixing a basis $e_1,\dots,e_n$ gives us an embedding from $\SL_n(q)$ into $\Aut(V)$. Next we will apply the methods from the previous section to show that $\clim \SL_{2^n}(q)$ is extremely amenable.
%rank from 2 to 3 in proof
\begin{theorem}\label{thm:SLConcentrates}
	The normalized counting measure $\mu_n$ on the groups $\SL_{n}(q)$ concentrates with respect to the normalized rank-metric $d_n$, i.e. for all $\varepsilon>0$
	\[\lim_{n\to\infty} \alpha_{(\SL_{n}(q), d_n, \mu_n)}(\varepsilon)=0 .\]
\end{theorem}
\begin{proof}\FlorianSagt{proof for $\SL$ and $\GL$ te same?}
	We will apply Corollary \ref{cor:meaContractionGroups} to a sequence of subgroups which also shows that the length of  $\SL_n(q)$ is bounded by $3n^{-\frac{1}{2}}$.
	Let $e_1,\dots,e_n$ be a basis of an $n$ dimensional $\F_q$ vector space $V$. Look at the sequence
	\[\SL_0(q)<\SL_1(q)<\dots<\SL_n(q),\]
	where $\SL_{i-1}(q)$ becomes a subgroup of $\SL_i(q)$ via the embedding $g\mapsto 
	\begin{pmatrix}
		g & 0 \\
		0 & 1 
	\end{pmatrix}$. Next we want to bound the diameter of $\SL_{i}(q)/\SL_{i-1}(q)$ by $\frac{3}{n}$. By Lemma \ref{lem:factorMetric} it suffices to show that for any $g,g'\in\SL_i(q)$ there is an $h\in \SL_{i-1}(q)$ such that $d(g,g'h)\leq\frac{3}{n}$. Since $d$ is bi-invariant we can assume w.l.o.g. that $g'$ is equal to the identity matrix $I_i$. 
	Our goal is now to find a $g'\in\SL_i(q)$ that is the identity on $e_i$ and has a small distance to $g$.
				
	Let us take a closer look at $ge_i$. If $e_i$ is an eigenvector of $g$ with eigenvalue $\lambda$, then $\lambda\not=0$ and $g$ is of the form 
	$\begin{pmatrix}
		A      & 0       \\
		c^\bot & \lambda 
	\end{pmatrix}$.
	Define $h':=
	\begin{pmatrix}
		\lambda & 0            \\
		0       & \lambda^{-1} 
	\end{pmatrix}
	$
	and $g':=
	\begin{pmatrix}
		I_{i-2} & 0  \\
		0       & h' 
	\end{pmatrix}\cdot g$.
	By construction $g'\in\SL_i(q)$ and it is of the form 
	$\begin{pmatrix}
		A'      & 0 \\
		c'^\bot & 1 
	\end{pmatrix}$. Since $\det g'=1$ we have that $\det A'=1$ and therefore $A'\in\SL_{i-1}(q)$ making it a suitable candidate for $h$. Using the triangle inequality we obtain
	\begin{align*}
		d(g,h)   & \leq d(g,g')+d(g',h)          \\
		         & =d(I_i,\begin{pmatrix}        
		I_{i-2}  & 0                             \\
		0        & h'                            
		\end{pmatrix})+\frac{1}{n}\rank(\begin{pmatrix}
		0        & 0                             \\
		-c'^\bot & 0                             
		\end{pmatrix})\\
		         & \leq \frac{2}{n}+ \frac{1}{n} 
	\end{align*}
	as desired.
				
	If $e_i$ is not an eigenvector of $g$, then we can make a change of basis of $\langle e_1,\dots,e_{i-1}\rangle$ such that $ge_i=e_{i-1}+\lambda e_i$. Henceforth we can assume w.l.o.g. that $g$ is of the form 
	$\begin{pmatrix}
		       &         & 0       \\
		\multicolumn{2}{c}
		{\raisebox{\dimexpr\normalbaselineskip+.2\ht\strutbox-0.9\height}[0pt][0pt]
		{\scalebox{2.3}{$A$}}} &1\\
		c^\bot & c_{i-1} & \lambda 
	\end{pmatrix}
	$.
	Define $h':=
	\begin{pmatrix}
		\lambda & -1 \\
		1       & 0  
	\end{pmatrix}
	$ and as before $g':=
	\begin{pmatrix}
		I_{i-2} & 0  \\
		0       & h' 
	\end{pmatrix}\cdot g$.
	Now we can apply the argument from above to get an $h\in \SL_{i-1}(q)$ such that $d(g,h)\leq\frac{3}{n}$. Applying Corollary \ref{cor:meaContractionGroups} we obtain
	\[\alpha_{(\SL_n(q), d_n, \mu_n)}(\varepsilon)\leq 2\exp\left(-\frac{\varepsilon^2}{16\cdot\sum_{i=1}^{n}\frac{9}{n^2}}\right)=2\exp\left(-\frac{\varepsilon^2 n}{16\cdot9}\right),\]
	which tends to 0 as $n$ goes to infinity. 
				
\end{proof}
		
From this theorem the main result of this section easily follows.
		
\begin{corollary}
	The Polish group $\clim \SL_{2^n}(q)$ is extremely amenable.
\end{corollary}
\begin{proof}
	Theorem \ref{thm:SLConcentrates} implies that $\clim \SL_{2^n}(q)$ is a Levy group and is therefore extremely amenable, by Theorem \ref{thm:LevyImpliesExAm}.
\end{proof}
		
As a byproduct we found an upper bound for the length of $\SL_n(q)$. The natural question to ask is: How good is this upper bound? Therefore our next goal is to also determine a lower bound. This part is not essential to the rest of the thesis but still interesting.
		
\begin{lemma}\label{lem:diamLen}
	Let $(X,d,\mu)$ be a finite mm-space with diameter $\Delta$ and %\FlorianSagt{could be that this only holds for finite $X$ as conditions in definition of length are just almost surely}
	\[\Omega_0=\{X\}\prec\dots\prec\Omega_n=\{\{x\}\mid x\in X\}\]
	with $a_1,\dots,a_n$ as in Definition \ref{def:length}. Then 
	\[\sum_{i=1}^{n}a_i\geq \Delta.\]
\end{lemma}
\begin{proof}
	Let $x,y\in X$, with $x\neq y$, we show $d(x,y)\leq\sum_{i=1}^{n}a_i$. Let $i_0$ be the smallest number such that $[x]_{i_0}\neq [y]_{i_0}$. Since $[x]_0=X=[y]_0$ we know that $i_0$ is at least 1. Therefore $[x]_{i_0-1}=[y]_{i_0-1}$ and there is an isomorphism $\varphi_{i_0}\colon[x]_{i_0}\to[y]_{i_0}$ such that $d(\varphi_{i_0}(x),y)\leq a_{i_0}$. %\FlorianSagt{here is the a.s. problem} 
	Let $x_{i_0}=\varphi_{i_0}(x)$, then 
	\[d(x,y)\leq d(x,x_{i_0})+d(x_{i_0},y).\]
	If $x_{i_0}=y$, then we are done. Otherwise let $i_1$ be the smallest number such that $[x_{i_0}]_{i_1}\neq [y]_{i_1}$. Then let $\varphi_{i_1}\colon[x_{i_0}]_{i_1}\to[y]_{i_1}$ be an isomorphism such that $d(\varphi_{i_1}(x_{i_0}),y)\leq a_{i_1}$. Define $x_{i_1}=\varphi_{i_1}(x_{i_0})$. Proceeding in this fashion yields elements $x_{i_0},\dots,x_{i_k}$ such that $x_{i_k}=y$ and
	\[d(x,y)\leq d(x,x_{i_0})+d(x_{i_0},x_{i_1})+\dots+d(x_{i_{k-1}},x_{i_k})\leq a_{i_0}+\dots +a_{i_k}\leq\sum_{i=1}^{n}a_i.\]
	From this the claim immediately follows.
\end{proof}
		
		
\begin{lemma}\label{lem:lengthLowerBound}
	Let $(X,d,\mu)$ be a finite mm-space with diameter $\Delta$ and $\delta=\min_{x\not=y} d(x,y)$. Then the length of $X$ is at least $(\Delta\cdot\delta)^{\frac{1}{2}}$.
\end{lemma}
\begin{proof}
	We show by induction on $n$ that for any nonnegative $a_1,\dots, a_n$ with $\delta=\min_{1\leq i\leq n} a_i$ we have
	\[\sum_{i=1}^{n}a_i\geq \Delta\implies \sum_{i=1}^{n}a_i^2\geq \Delta\cdot\delta.\]
				
	For $n=1$: Note that $\Delta\geq\delta$. Hence 
	\[\sum_{i=1}^{n}a_i^2=a_1^2=\delta\cdot \delta\geq \Delta\cdot \delta.\]
				
	For $n>1$: Assume w.l.o.g. that $a_1\leq\dots\leq a_n$. Then 
	\begin{align*}
		\sum_{i=1}^{n}a_i\geq \Delta
		\implies                       & \sum_{i=2}^{n}a_i\geq \Delta-\delta\tag{$a_1=\delta$}                        \\
		\stackrel{\text{I.H.}}\implies & \sum_{i=2}^{n}a_i^2\geq (\Delta-\delta)\cdot \delta'\tag{with $\delta'=a_2$} \\
		\implies                       & \sum_{i=2}^{n}a_i^2\geq \Delta\cdot\delta-\delta^2\tag{$\delta\leq\delta'$}  \\
		\implies                       & \sum_{i=1}^{n}a_i^2\geq \Delta\cdot\delta\tag{$a_1^2=\delta^2$}.             
	\end{align*}
				
	From this claim together with Lemma \ref{lem:diamLen} we obtain the desired lower bound.
				
\end{proof}
		
Using this we can give an interval for the length of $\SL_n(q)$.
		
\begin{corollary}
	Consider $(\SL_{n}(q),d,\mu)$, where $d$ is the normalized rank-metric and $\mu$ is the normalized counting measure. Then the length $l$ of this mm-space satisfies
	\[n^{-\frac{1}{2}}\leq l\leq 3n^{-\frac{1}{2}}.\]
\end{corollary}
\begin{proof}
	The diameter of $\SL_n(q)$ is equal to 1 and for any $g\not=g'\in\SL_n(q)$ we have that $d(g,g')\geq \frac1n$.
\end{proof}
		
The next goal is to show that the closure of the limit of symplectic groups is also extremely amenable. Theses groups can be seen as automorphism groups of a vector space together with a symplectic form. The proof will be similar to the one for the special linear groups but extending the partial inverse $h'$ becomes much harder. This is why in the next section we will prove Witt's Lemma which does exactly what we need, i.e. extending isometries.
		
\section{Witt's Lemma}\label{sec:witt}
In this section we will prove Witt's Lemma and explore the structure of symplectic spaces. Witt's Lemma states that an isometry between subspaces of a finite dimensional symplectic, unitary, or orthogonal space can always be extended to an isomtry on the whole space.  We will roughly follow the proof in \cite{Witt}. Since we are mainly interested in symplectic spaces we will only show Witt's Lemma for those but it also holds for unitary and orthogonal spaces.
		
\begin{definition}
	Let $V$ be an $\F_q$ vector space. A bilinear form $\omega$ on $V$ is called \define{symplectic} if $\omega$ is nondegenerate, i.e. $\omega(x,\ .\ )\not=0_V$ for all $x\in V\setminus\{0\}$, and $\omega(x,y)=-\omega(y,x)$ for all $x,y\in V$. We call $(V,\omega)$ a \define{symplectic space}.
				
	A finite group $G$ is called \define{symplectic} if there is a symplectic space $(V,\omega)$ such that $G\cong\Aut(V,\omega)$. 
				
	A subspace $U\leq V$ is \define{nondegenerate} if $\omega$ restricted to $U$ is nondegenerate (this is the case if and only if $U\cap U^\bot=\{0\}$). 
				
	%For $x,y\in V$ with $\omega(x,y)$ we will write $x\bot y$ and for a set $X\subseteq V$ define
	%\[X^\bot=\{y\in V\mid \omega(x,y)=0\}.\]
\end{definition}
Throughout this section let $(V,\omega)$ be a finite dimensional symplectic $\F_q$ vector space.
Note that $\omega(x,y)=0$ iff $\omega(y,x)=0$, also $\omega(x,x)=0$ for all $x\in V$.
We will start of with some technical lemmas.
		
		
\FlorianSagt{make shortversion for each section?}
%\begin{lemma}
%For an $x\in V$ and a subspace $U\leq V$ with $x\notin U^\bot$ we have 
%\[\dim( x^\bot\cap U)= \dim U -1.\]
%\end{lemma}
		
\begin{lemma}\label{lem:dimUBot}
	For a subspace $U\leq V$ we have 
	\[\dim U^\bot= \dim V -\dim U.\]
\end{lemma}
\begin{proof}
	Let $u_1,\dots,u_m$ be a basis of $U$ and consider the linear map
	\begin{align*}g\colon V\to \F_q^m&&\text{ with }&&g(v)=
		\begin{pmatrix} 
		\omega(v,u_1)   \\
		\vdots          \\
		\omega(v,u_m)   
		\end{pmatrix}.  
	\end{align*}
	By definition the kernel of $g$ is $U^\bot$ and since $\omega$ is nondegenerate $g$ is also surjective. Therefore the claim follows from the Rank-Nullity Theorem.
\end{proof}
		
		
The following lemma is an immediate consequence of the previous one.
\begin{lemma}\label{lem:Ubotbot}
	Let $U\leq V$. Then
	\begin{enumerate}[label=\roman{*})]
		\item $U$ is nondegenerate iff $V=U\oplus U^\bot$ and
		\item $U^{\bot\bot}=U$.
	\end{enumerate}
\end{lemma}
\begin{proof}
	If $U$ is nondegenerate then $U\cap U^\bot=\{0\}$. By Lemma \ref{lem:dimUBot} \[U\oplus U^\bot=\langle U,U^\bot\rangle=V.\]
	The other direction is clear from the definition
				
	For $ii)$ note that $U\subseteq U^{\bot\bot}$. By Lemma \ref{lem:dimUBot} they also have the same dimension and are therefore equal.
\end{proof}
		
Now we want to better understand the structure of symplectic spaces. 
We start with 2-dimensional symplectic spaces, which we will call \define{hyperbolic planes}.
		
		
\begin{lemma}\label{lem:oneHypPlane}
	There is only one hyperbolic plane up to isometry.
\end{lemma}
\begin{proof}
	Let $(V,\omega)$ and $(V',\omega')$ be hyperbolic planes with basis $r,s$ and $r',s'$, respectively. 
	Then $r\mapsto r', s\mapsto \lambda s'$ with $\lambda=\omega'(r',s')^{-1}\cdot\omega(r,s)$ is an isometry between the two hyperbolic planes. 
\end{proof}
Next we will strengthen this result and show that any symplectic space is the direct sum of hyperbolic planes.
%Next we will strengthen this result and show that any symplectic space is uniquely determined by its dimension.
		
\begin{theorem}\label{thm:hypDecomp}
	Let $r\in V\setminus\{0\}$. Then there is a hyperbolic plane $U\leq V$ containing $r$ such that $V=U\oplus U^\bot$. Furthermore, if $W\leq V$ with $W\bot r$ and $r\notin W$, then there is a $U$ as before that also fulfills $W\bot U$.
\end{theorem}
\begin{proof}
	Since $\omega(r,r)=0$ we know that $r\in r^\bot$. Let $H\leq r^\bot$ containing $W$ such that $\langle r\rangle\oplus H=r^\bot$. Then, by Lemma \ref{lem:dimUBot}, $\dim r^\bot=\dim V-1$, $\dim H^\bot=2$, and $r\in H^\bot$. In particular $\dim V>1$.
	Our goal is to show that \[V=H^\bot\oplus H,\] then $H^\bot$ would be a suitable choice for $U$.
	It suffices to show that $H^\bot$ is nondegenerate, as then the claim follows from Lemma \ref{lem:Ubotbot}. Let $s\in H^\bot$ such that $H^\bot=\langle r,s\rangle$. Now $H^\bot$ is nondegenerate iff $\omega(r,s)\not=0$. 
				
	Assume $\omega(r,s)=0$. Then $r\in s^\bot$ and $H\subseteq s^\bot$. Since, by construction, $r\notin H$ we have $r^\bot=\langle r,H\rangle=s^\bot$. Hence $r$ and $s$ are linearly dependent contradicting that $r,s$ is a basis of $H^\bot$.
				
\end{proof}
		
Using Theorem \ref{thm:hypDecomp} we can describe the structure of symplectic spaces.
		
\begin{corollary}\label{cor:structureSympl}
	%The symplectic space $(V,\omega)$ is of even dimension $2n$ and can be written as the orthogonal sum of hyperbolic planes $U_1,\dots, U_n$, i.e. $V=U_1\oplus\dots\oplus U_n$.
				
	Let $(V,\omega)$ be a symplectic space. Then $V$ is of even dimension $2n$ and there are hyperbolic planes $U_1,\dots, U_n\leq V$ such that $V=U_1\oplus\dots\oplus U_n$ and $U_i\bot U_j$ for $i\not=j$.
	In particular for any $n$ there is exactly one symplectic space of dimension $2n$.
\end{corollary}
\begin{proof}
	We use induction on $n=\dim V$.
				
	If $n=1$ then $V=\langle v\rangle$ for $v\in V\setminus\{0\}$. But $\omega(v,v)=0$ and therefore $\omega$ is degenerate which is a contradiction.
				
	If $n=2$ then the claim follows from Lemma \ref{lem:oneHypPlane}.
				
	If $n>2$ then by Theorem \ref{thm:hypDecomp} there is a hyperbolic plane $U_1\leq V$ satisfying $V=U_1\oplus U_1^\bot$. Hence, by induction hypothesis, $n$ is even and $U^\bot =U_2\oplus\dots \oplus U_m$ for some hyperbolic planes $U_2,\dots,U_m\leq U^\bot$ with $m=\frac{n}{2}$ and $U_i\bot U_j$ for $i\not=j$.
\end{proof}
		
%\begin{corollary}
%Every symplectic space is of even dimension and for any $n$ there is exactly one symplectic space of dimension $2n$.
%\end{corollary}
With these powerful tools we can easily prove Witt's Lemma.
%For the remainder of this section 
Let $\alpha\colon U\to W$ be an isometry between subspaces $U,W\leq V$.
\begin{lemma}\label{lem:wittPrep1}
	There are subspaces $U'\geq U$ and $W'\geq W$ with $U',W'$ nondegenerate such that $\alpha$ can be extended to an isometry $\tilde{\alpha}\colon U'\to W'$.
\end{lemma}
\begin{proof}
	We show this claim using induction on $n=\dim (U\cap U^\bot)$.
				
	If $n=0$ then $U$ itself is nondegenerate and we are done.
				
	If $n>0$ then let $r\in (U\cap U^\bot)\setminus\{0\}$ and $\tilde U\leq V$ such that $\langle r\rangle\oplus \tilde U=U$. By Theorem \ref{thm:hypDecomp} there is a hyperbolic plane $H\leq V$ containing $r$ such that $\tilde U\bot H$. 
	Similarly, there is a hyperbolic plane $H'\leq V$ containing $r':=\alpha(r)$ such that $H'\bot\tilde{W}$ with $\tilde{W}=\alpha(\tilde{U})$. Let $r,s$ and $r',s'$ be a basis of $H$ and $H'$, respectively. Note that $\omega(r,s)\not=0$ and $r\bot U$ imply $s\notin U$. Analogously, $s'\notin W$. We can assume w.l.o.g. that $\omega(r,s)=\omega(r',s')$. Now we can extend $\alpha$ to $\tilde{\alpha}\colon \langle U,s\rangle\to \langle W,s'\rangle$ by defining $\tilde\alpha (s):= s'$. Note that $\langle U,s\rangle=\langle \tilde{U},H\rangle$. Since $\tilde{U}\bot H$ we have
	\begin{align*}
		\dim(\langle \tilde{U},H\rangle \cap \langle \tilde{U},H\rangle^\bot) & =\dim(\tilde{U}\cap \tilde{U}^\bot)<\dim(U\cap U^\bot). 
		%\tilde{\alpha}\colon \langle \tilde{U},r,s\rangle\to \langle \tilde W,r',s'\rangle
	\end{align*}
	Hence we can apply the induction hypothesis to $\tilde{\alpha}$.
\end{proof}
		
\begin{lemma}\label{lem:wittPrep2}
	If $U$ is nondegenerate. Then $\alpha$ can be extended to an isometry $\tilde{\alpha}\colon V\to V$.
\end{lemma}
\begin{proof}
	Since $U$ is nondegenerate we have that $W$ is also nondegenerate and we can apply Lemma \ref{lem:Ubotbot} and obtain \[V=U\oplus U^\bot=W\oplus W^\bot.\]
	By Lemma \ref{lem:dimUBot} we have $\dim U^\bot=\dim W^\bot$. Hence, by Corollary \ref{cor:structureSympl}, there is an isometry $\beta\colon U^\bot\to W^\bot$. Finally, $\alpha\oplus \beta\colon V\to V$ is an isometry extending $\alpha$.
\end{proof}
		
With this preparation we can now come to the main result.
\begin{corollary}[Witt's Lemma]\label{lem:witt}
	The map $\alpha$ can be extended to an isometry $\tilde{\alpha}\colon V\to V$.
\end{corollary}
\begin{proof}
	Using Lemma \ref{lem:wittPrep1} extend $\alpha$ to $\tilde{\alpha}\colon U'\to W'$ for some $U'\geq U$, $W'\geq W$ nondegenerate. Now apply Lemma \ref{lem:wittPrep2} to extend $\tilde{\alpha}$ to $\tilde{\tilde{\alpha}}\colon V\to V$.
\end{proof}
		
Now that we understand symplectic spaces and can extend isometries we are well equipped for the next section, where will show that the closure of the limit of symplectic groups is also extremely amenable.
		
		
%\section{Limits of other Matrix group families are Levy groups too}\label{sec:mySec}\FlorianSagt{rename}
\section{Symplectic Groups and Extreme Amenability}\label{sec:mySec}
%When studying matrices it is often useful to look at the corresponding linear maps of a suitable vector space. In the case of orthogonal, symplectic, or unitary matrices these are linear maps from the vector space to itself preserving an orthogonal, symplectic, or unitary form respectively. Formally, the symplectic group $\Sp_n(q)$ is isomorphic to $\Aut(V,\omega)$ from Corollary \ref{cor:structureSympl} it follows that $\Sp_n(q)$ is well defined, where $V$ is an $n$-dimensional $F(q)$ vector space and $\omega$ is a symplectic form.
		
%As we have to handle only finite dimensional vector spaces here a lot of nice theorems hold. \dots
		
Our goal in this section is to show that $\clim \Sp_{2^n}(q)$ is extremely amenable. The structure of the proof is the same as in Section \ref{sec:thom} for special linear groups. We will bound the length of $\Sp_n(q)\cong\Aut(V,\omega)$ by applying Corollary \ref{cor:meaContractionGroups} to a sequence of subgroups $(G_i)_{0\leq i\leq n}$. To bound the diameter of $G_i/G_{i-1}$ we will construct for any $g\in G_i$ an $h'\in G_i$ such that the distance between $g$ and $h'g$ is small and $h'g\in G_{i-1}$. The $h'$ will behave like the inverse of $g$ on a small subspace of $V$ and like the identity on most of the rest. The proof can be generalized to unitary and orthogonal groups and therefore we will briefly introduce those and afterwards show extreme amenability for the closure of the limits of symplectic, unitary, and orthogonal groups.
		
\begin{definition}
	Let $V$ be a finite dimensional $\F_q$ vector space and $\omega$ a nondegenerate map from $V\times V$ to $\F_q$.
				
	Then $(V,\omega)$ is an \define{orthogonal space} if $\omega$ is bilinear, $\omega(x,y)=\omega(y,x)$ for all $x,y\in V$, and if $q=2$ then $\omega(x,x)=0$ for all $x\in V$.
				
	And $(V,\omega)$ is a \define{unitary space} if there is an $h\in\Aut(\F_q)$ with $h^2=1$ such that 
	\begin{align*}
		\omega(ax+y,z) & =a\omega(x,z)+\omega(y,z)    \\
		\omega(x,ay+z) & =h(a)\omega(x,y)+\omega(x,z) \\
		\omega(x,y)    & =h(\omega(y,x))              
	\end{align*}
	for all $x,y,z\in V$ and $a\in\F_q$.
				
	\define{Orthogonal} and \define{unitary groups} are the automorphism groups of unitary and orthogonal spaces, respectively.
\end{definition}
		
In the following let $(V,\omega)$ be a symplectic, unitary, or orthogonal space.
Note that in any case $\omega$ is nondegenerate and 
\begin{align*}
	\omega(x,y)=0 \text{ iff }\omega(y,x)=0\text{ for all $x,y\in V$}. 
\end{align*}
Obviously, Lemmas \ref{lem:dimUBot} and \ref{lem:Ubotbot} from the previous section still hold in  unitary and orthogonal spaces. Furthermore, Witt's Lemma also holds in unitary and orthogonal spaces, for a proof see \cite{Witt}
\begin{theorem}[Witt's Lemma]\label{thm:Witt}
	Let $(V,\omega)$ be a symplectic, unitary, or orthogonal space and $\alpha\colon U\to W$ be an isometry between subspaces $U,W\leq V$.
	Then $\alpha$ can be extended to an isometry $\tilde{\alpha}\colon V\to V$.
\end{theorem}
		
The next lemma is necessary to construct the chain of subgroups, in the case of symplectic spaces it is a trivial consequence of Theorem \ref{thm:hypDecomp}.
		
%Let $V$ be an $n$ dimensional vector space.%and e_1,...,e_n\in V a basis
%\begin{lemma}\label{lem:complementExists}
%For all $U\leq V$ there is an $U'\leq V$ such that $U\oplus U'=V$.
%\end{lemma}
		
		
%Let $\omega$ be a bilinear form on $V$.
		
%\begin{lemma}\label{lem:dimComplement}
%Let $U\leq V$. Then $\dim U^\bot= \dim V-\dim U$.
%\end{lemma}
%\begin{lemma}\label{lem:doubleComplement}
%Let $U\leq V$. Then $U^{\bot^\bot}=U$.
%\end{lemma}
		
		
\begin{lemma}\label{lem:decompositionComplement}
	There exists a $U\leq V$ with $\dim U\leq 2$ such that $V=U\oplus U^\bot$.
\end{lemma}
\begin{proof}
	Let $r\in V\setminus\{0\}$. By Lemma \ref{lem:dimUBot} $\dim r^\bot= n-1$. %Since $\omega$ is non degenerate $\omega(e,.)\not=0$ and therefore $e^\bot\not=V$. Hence $\dim e^\bot= n-1$.
				
	If $r\notin r^\bot$, then $V=\langle r\rangle\oplus r^\bot$ and $\langle r\rangle$ is the desired $U$.
				
	If $r\in r^\bot$, then let $H\leq r^\bot$ such that $\langle r\rangle\oplus H=r^\bot$. Now proceed as in the proof of Theorem  \ref{thm:hypDecomp} to show that $H^\bot$ is a suitable $U$.
				
				
	%extend $e$ to a basis $e,b_2,\dots,b_{n-1}$ of $e^\bot$ and consider the 2-dimensional subspace $U:=\langle b_2,\dots,b_{n-1}\rangle^\bot$. Now we have to show that \[U\cap U^\bot=0.\]
	%Take $v$ from the intersection. By Lemma \ref{lem:Ubotbot} $U^\bot=\langle b_2,\dots,b_{n-1}\rangle$ and $v\bot b_i$ for all $i\in\{2,\dots,n-1\}$. Since $\langle b_2,\dots,b_{n-1}\rangle\leq e^\bot$ we also have $v\bot e$. Hence $v\in e^{\bot^\bot}=\langle e\rangle$ and $v=\lambda e$. Now $e\notin \langle b_2,\dots,b_{n-1}\rangle$ implies $v=0$. Henceforth $V=U\oplus U^\bot$.
\end{proof}
		
The following lemma shows that isometries interact nicely with complements.
		
\begin{lemma}\label{lem:isomStaysInCompl}
	Let $U\leq V$ and $\alpha\colon V\to V$ be an isometry such that $\alpha(U)=U$. Then $\alpha(U^\bot)= U^\bot$.
\end{lemma}
\begin{proof}
	As $\dim \alpha(U^\bot)=\dim U^\bot$ it suffices to show that $\alpha(u')\bot u$ for all $u\in U$ and $u'\in U^\bot$. Let $v\in U$ with $\alpha(v)=u$. Then
	\begin{align*}
		\omega(\alpha(u'),u) & =\omega(\alpha(u'),\alpha(v)) \\
		                     & =\omega(u',v)                 \\
		                     & =0.                           
	\end{align*}
	This concludes the proof.
\end{proof}
		
The next lemma gives us a large subspace on which $h'$ can be the identity without interfering with the part where it is the inverse of $g$.
		
\begin{lemma}\label{lem:largeOrthogonal}
	For all $W\leq V$ there is a $W'\leq W^\bot$ such that $W\cap W'=0$ and \[\dim W'\geq \dim V-2\dim W.\]
\end{lemma}
\begin{proof}
	Let $W'\leq W^\bot$ such that 
	\[W^\bot=(W^\bot\cap W)\oplus W'.\]
	Clearly, $W\cap W'=0$ and 
	%\[\dim W'=\dim W^\bot - \dim (W^\bot\cap W)\geq \dim W^\bot- \dim W.\]
	\begin{align*}
		\dim W' & =\dim W^\bot - \dim (W^\bot\cap W)                   \\
		        & \geq \dim W^\bot- \dim W                             \\
		        & =\dim V-\dim W-\dim W .\tag{Lemma \ref{lem:dimUBot}} 
	\end{align*}
	This concludes the proof.
\end{proof}
		
		
%\begin{lemma}
%Let $U,W\leq V$ such that $U\bot W$ and $U\cap W=0$. Then $\langle U,W\rangle\cong U\oplus W$.
%\end{lemma}
%\begin{lemma}\label{lem:isomSum}\FlorianSagt{maybe $g\colon U_1\to U_2$ and $h\colon W_1\to W_2$ better}
%Let $g_1\colon U_1\to W_1$ and $g_2\colon U_2\to W_2$ be isometries such that $U_1\bot U_2$, $U_1\cap U_2=0$, $W_1\bot W_2$, and $W_1\cap W_2=0$.
%Then $g_1\oplus g_2\colon U_1\oplus U_2\to W_1\oplus W_2$ is also an isomtry.
%\end{lemma}
%\begin{proof}
%Obviously, $g_1\oplus g_2$ is again a bijective linear map. Consider $v_1+v_2, u_1+u_2\in U_1\oplus U_2$
%\begin{align*}
%\omega(v_1+v_2, u_1+u_2)&=\omega(v_1, u_1)+\omega(v_1, u_2)+\omega(v_2, u_1)+\omega(v_2, u_2)\\
%&=\omega(v_1, u_1)+0+0+\omega(v_2, u_2) \tag{$U_1\bot U_2$}\\
%&=\omega(g_1(v_1), g_1(u_1))+\omega(g_2(v_2), g_2(u_2))\\
%&=\omega(g_1(v_1), g_1(u_1))+\omega(g_1(v_1), g_2(u_2))\\ &\phantom{={}}+\omega(g_2(v_2), g_1(u_1))+\omega(g_2(v_2), g_2(u_2))\tag{$W_1\bot W_2$}\\
%&=\omega(g_1\oplus g_2(v_1+v_2), g_1\oplus g_2(u_1+u_2))
%\end{align*}
%Hence $g_1\oplus g_2$ preserves $\omega$.
%\end{proof}
		
Now we can proof the analogue of Theorem \ref{thm:SLConcentrates} from Section \ref{sec:thom}.
		
%Let $G$ be a symplectic, unitary, or orthogonal group. Then the \define{dimension} of $G$ is the minimum of $\dim V'$ such that there is an $\omega'$ with $G\cong\Aut(V',\omega')$. 
		
\begin{theorem}\label{thm:suoBoundDiam}
	%Let $G$ be a symplectic, unitary, or orthogonal group of dimension $n\geq2$ equipped with the rank metric $d$, where $d(g,g')=\lambda \cdot\rank(g-g')$. Then there is a subgroup $H\leq G$ of dimension at most $n-1$ such that the diameter of $G/H$ is at most $8\lambda$.
				
	Let $G$ be a symplectic, unitary, or orthogonal group equipped with the rank metric $d$ and of diameter $n$. Then there is a symplectic, unitary, or orthogonal subgroup $H\leq G$ with diameter at most $n-1$ such that the diameter of $G/H$ is at most $8$.
\end{theorem}
\begin{proof}
	We have $G\cong\Aut(V,\omega)$ for some $n$-dimensional vector space $V$ and some $\omega$. Use Lemma \ref{lem:decompositionComplement} to obtain $U\leq V$ such that $V=U\oplus U^\bot$ and $\dim U\leq2$. Define $H=\Aut(U^\bot,\omega)$. Our aim is to find for any $g\in G$ an $g'\in H$ such that $d(g,g')\leq8$.
	The idea is to find a map $h'\in G$ that behaves like the inverse of $g$ on $gU$ and like the identity on most of the rest. Then $h'g$ is the desired $g'$.
				
	Let $g\in G$ and define $W=\langle U,gU\rangle$. By Lemma \ref{lem:largeOrthogonal} there is a $W'$ such that $\dim W'\geq n-8$, $W'\leq W^\bot$, and $W'\cap W=0$. Consider the map
	\begin{align*}
		g^{-1}|_{gU}\oplus 1_{W'}\colon gU\oplus W'\to U\oplus W' 
	\end{align*}
	since $g^{-1}|_{gU}$ and $1_{W'}$ are isometries and $W\bot W'$ we have that the above map is also an isomtry. By Theorem \ref{thm:Witt} this isometry can be extended to an isometry $h'\colon V\to V$. Furthermore,
	\begin{align*}
		d(g,h'g) & =\dim\im (g-h'g)                                    \\
		         & \leq 8+\dim \im(g-h'g)|_{W'}\tag{$\dim W'\geq n-8$} \\
		         & = 8+\dim \im(g-g)|_{W'}\tag{$h'|_{W'}=1_{W'}$}      \\
		         & =8.                                                 
	\end{align*}
	Finally, we need to show that $h'g\in H$, here the choice of $H$ using Lemma \ref{lem:decompositionComplement} comes into play. By construction of $h'$ we have that $h'g|_U=1_U$. Therefore we can apply Lemma \ref{lem:isomStaysInCompl} and get that $h'g(U^\bot)= U^\bot$. Hence $h'g\in H$ and $d(g,h'g)\leq8$.
				
\end{proof}
		
\begin{corollary}\label{cor:suoConcentrates}
	Let $G=\Aut(V,\omega)$ be a symplectic, unitary, or orthogonal group equipped with the normalized rank metric $d$ and the normalized counting measure $\mu$, where $V$ is $n$ dimensional. Then the length of $G$ is at most $8n^{-\frac{1}{2}}$ and for all $\varepsilon>0$
	\[\alpha_{(G,d,\mu)}(\varepsilon)\leq 2\exp\left(-\frac{\varepsilon^2n}{16\cdot64}\right).\]
\end{corollary}
\begin{proof}
	Applying Theorem \ref{thm:suoBoundDiam} multiple times gives us a sequence of subgroups $\{e\}=G_0\leq \dots\leq G_m=G$ such that $m\leq n$ and the diameter of $G_i/G_{i-1}$ is at most $\frac{8}{n}$. Now we can use Corollary \ref{cor:meaContractionGroups} to obtain the desired upper bound.
\end{proof}
Observe that as in Section \ref{sec:thom} we can apply Lemma \ref{lem:lengthLowerBound} and obtain $n^{-\frac{1}{2}}$ as a lower bound for the length of $G$.
Now we can prove the main result of this thesis.
\begin{corollary}
	Let $(V_0,\omega_0)\subset (V_1,\omega_1)\subset \dots$ be a sequence of $\F_q$ vector spaces such that $(V_n,\omega_n)$ is a symplectic, unitary, or orthogonal space of dimension $2^n$ and $\omega_{n+1}|_{V_n}=\omega_n$ for all $n\in\N$. Let $G_{n}=\Aut(V_n,\omega_n)$ equipped with the normalized rank metric $d_n$ and the normalized counting measure $\mu_n$. 
	Then \[\lim_{n\to\infty}\alpha_{(G_n,d_n,\mu_n)}(\varepsilon)=0\] for all $\varepsilon>0$ and $\clim G_n$ is extremely amenable.
\end{corollary}
\begin{proof}
	Immediate from Corollary \ref{cor:suoConcentrates} and Theorem \ref{thm:LevyImpliesExAm}.
\end{proof}
		
%\section{Application}\label{sec:ramsey}\FlorianSagt{rename}
\section{Symplectic Groups and Ramsey Theory}\label{sec:ramsey}
In this section we will use the upper bound obtained for the length of symplectic, unitary, and orthogonal groups to deduce a Ramsey theoretic result. %The proof is the same as in \cite{thom} we just replaced $\SL_n(q)$ by a symplectic, unitary, or orthogonal group.
As in Section \ref{sec:mySec} the results from this section are already shown in \cite{thom} for special linear groups. 
		
The first lemma is very similar to Theorem \ref{thm:measureConcetration}.
\begin{lemma}[Lemma 2.7 in \cite{thom}]\label{lem:measureOfNeigh}
	Let $(X,d,\mu)$ be a finite mm-space with length $l$. Then for every $\varepsilon>0$ and $A\subseteq X$ with $\mu(A)>2\exp\left(-\frac{\varepsilon^2}{16l^2}\right)$ we have
	\[\mu(N_\varepsilon(A))\geq 1-2\exp\left(-\frac{\varepsilon^2}{16l^2}\right).\]
\end{lemma}
		
		
A covering $\mathcal{U}$ of a metric space $(X,d)$ is an \define{$\varepsilon$-covering} if for every $x\in X$ the $\varepsilon$-neighborhood of $x$ is contained in some $U\in\mathcal{U}$.
		
\begin{theorem}
	Let $\varepsilon>0$, $k,m\in\N$. Define $N:=16\cdot64\varepsilon^{-2}\cdot\max\{\ln(2k),\ln(2m)\}$ and let $G=\Aut(V,\omega)$, where $(V,\omega)$ is a symplectic, unitary, or orthogonal space of dimension $n>N$, with an $\varepsilon$-cover $\mathcal{U}$ of cardinality at most $m$. Then there is a $U\in\mathcal{U}$ such that for all $F\subseteq G$ satisfying $|F|\leq k$ there is a $g\in G$ with $gF\subseteq U$.
\end{theorem}
Intuitively the theorem says that whenever we color $G$ with $m$ colors, where a single element can have multiple colors, such that all elements of $\varepsilon$-balls have at least one color in common, then there is one color $c$ such that for every $F$ with at most $k$ elements there is a $g$ where the elements of $gF$ all have the color $c$.
\begin{proof}
	\def\core{\operatorname{Core}}
	Look at $G$ as the usual mm-space with normalized rank metric and normalized counting measure.
	Let $l$ be the length of $G$. Observe that, by Corollary \ref{cor:suoConcentrates}, $l\leq 8n^{-\frac{1}{2}}$.
	For $U\in \mathcal{U}$ define $\core(U):=\{x\in U\mid N_\varepsilon(x)\subseteq U\}$. Since $\mathcal{U}$ is an $\varepsilon$-covering we have $\bigcup_{U\in\mathcal{U}}\core(U)=G$. Therefore there is a $U\in\mathcal{U}$ such that $\mu(\core(U))\geq\frac{1}{m}$. As $n>16\cdot64\varepsilon^{-2}\cdot\ln(2m)$ we have
	\[\frac{1}{m}>2\exp\left(-\frac{\varepsilon^2n}{16\cdot64}\right)\geq 2\exp\left(-\frac{\varepsilon^2}{ 16l^2}\right).\]
	Now we can apply Lemma \ref{lem:measureOfNeigh} to $\core(U)$ and obtain
	\[\mu(U)\geq\mu(N_\varepsilon(\core(U)))\geq 1-2\exp\left(-\frac{\varepsilon^2}{ 16l^2}\right)\geq1-2\exp\left(-\frac{\varepsilon^2n}{16\cdot64}\right). \]
				
	Let $F\subseteq G$ with $|F|\leq k$. Note that 
	\[\{g\in G\mid gF\subseteq U\}=\bigcap_{h\in F}\{g\in G\mid gh\in U\}=\bigcap_{h\in F}Uh^{-1}.\]
	Therefore, $\mu(\{g\in G\mid gF\subseteq U\})\geq 1-k\cdot2\exp\left(-\frac{\varepsilon^2n}{16\cdot64}\right)$. By assumption $n>16\cdot64\varepsilon^{-2}\cdot\ln(2k)$, hence $\mu(\{g\in G\mid gF\subseteq U\})>0$ and there is a suitable $g$. 
\end{proof}
		
		
%\section{Conclusion}
